# ğŸš€ å¿«é€Ÿéƒ¨ç½²æŒ‡å—

## âš ï¸ å…³é”®è­¦å‘Š

**åœ¨å¯åŠ¨ Bot ä¹‹å‰å¿…é¡»æ‰§è¡Œæ•°æ®åº“è¿ç§»ï¼**

å½“å‰æ•°æ®åº“ç¼ºå°‘é‡è¦å­—æ®µï¼ˆå¦‚ `credits`, `battle_strategy` ç­‰ï¼‰ï¼Œç›´æ¥å¯åŠ¨ä¼šå¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚

---

## ğŸ“‹ å¿«é€Ÿéƒ¨ç½²ï¼ˆ5 åˆ†é’Ÿï¼‰

### 1ï¸âƒ£ ç¯å¢ƒæ£€æŸ¥
```bash
# ç¡®è®¤ Python ç‰ˆæœ¬ >= 3.11
python3 --version

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /path/to/xiuxian-game
```

### 2ï¸âƒ£ é…ç½® Bot Token â­ å¿…é¡»
```bash
# ç¼–è¾‘ .env æ–‡ä»¶
nano .env

# ä¿®æ”¹ä»¥ä¸‹è¡Œï¼š
BOT_TOKEN=ä½ çš„çœŸå®Token  # âš ï¸ å¿…å¡«
BOT_USERNAME=ä½ çš„Botç”¨æˆ·å
ADMIN_IDS=ä½ çš„TelegramID  # å¤šä¸ªç”¨é€—å·åˆ†éš”
```

### 3ï¸âƒ£ æ‰§è¡Œæ•°æ®åº“è¿ç§» â­â­â­ æœ€å…³é”®
```bash
# åˆ›å»ºæ•°æ®ç›®å½•
mkdir -p data/logs

# æ‰§è¡Œæ‰€æœ‰è¿ç§»ï¼ˆæŒ‰é¡ºåºï¼‰
cd data/migrations
for f in *.sql; do
    echo "æ‰§è¡Œè¿ç§»: $f"
    sqlite3 ../xiuxian.db < "$f"
done
cd ../..

# éªŒè¯è¿ç§»æˆåŠŸ
sqlite3 data/xiuxian.db "SELECT COUNT(*) FROM sqlite_master WHERE type='table';"
# åº”è¯¥çœ‹åˆ°å¤šä¸ªè¡¨
```

### 4ï¸âƒ£ å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

### 5ï¸âƒ£ å¯åŠ¨ Bot
```bash
cd src
python3 -m bot.main
```

---

## âœ… å¯åŠ¨æˆåŠŸæ ‡å¿—

ä½ åº”è¯¥åœ¨ç»ˆç«¯çœ‹åˆ°ï¼š
```
æ­£åœ¨å¯åŠ¨ ä¿®ä»™ä¸–ç•Œ v1.0.0...
åˆå§‹åŒ–æ•°æ®åº“...
æ•°æ®åº“åˆå§‹åŒ–å®Œæˆ
æ³¨å†Œå‘½ä»¤å¤„ç†å™¨...
è°ƒåº¦å™¨å·²å¯åŠ¨
Bot å¯åŠ¨æˆåŠŸï¼
```

---

## ğŸ§ª å¿«é€Ÿæµ‹è¯•

åœ¨ Telegram ä¸­å‘ Bot å‘é€ï¼š
1. `/start` - æ³¨å†Œè´¦å·
2. `/info` - æŸ¥çœ‹ä¿¡æ¯
3. `/æˆ˜ç•¥` - æµ‹è¯•æ–°åŠŸèƒ½ï¼ˆæˆ˜æ–—ç­–ç•¥ç³»ç»Ÿï¼‰

å¦‚æœéƒ½èƒ½æ­£å¸¸å“åº”ï¼Œè¯´æ˜éƒ¨ç½²æˆåŠŸï¼

---

## âš ï¸ å¸¸è§é—®é¢˜

### é—®é¢˜ 1: `no such column: players.credits`
**åŸå› **: æœªæ‰§è¡Œæ•°æ®åº“è¿ç§»
**è§£å†³**: æ‰§è¡Œæ­¥éª¤ 3ï¸âƒ£

### é—®é¢˜ 2: `BOT_TOKEN is required`
**åŸå› **: .env æ–‡ä»¶æœªé…ç½®æˆ– BOT_TOKEN ä¸ºç©º
**è§£å†³**: ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥çœŸå® Token

### é—®é¢˜ 3: Bot æ— å“åº”
**åŸå› **: Token é”™è¯¯æˆ–ç½‘ç»œé—®é¢˜
**è§£å†³**:
```bash
# æµ‹è¯• Token æ˜¯å¦æœ‰æ•ˆ
curl "https://api.telegram.org/botä½ çš„TOKEN/getMe"
```

---

## ğŸ”„ åå°è¿è¡Œï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

### ä½¿ç”¨ systemdï¼ˆæ¨èï¼‰
```bash
# 1. åˆ›å»ºæœåŠ¡æ–‡ä»¶
sudo nano /etc/systemd/system/xiuxian-bot.service

# 2. ç²˜è´´é…ç½®ï¼ˆè§ PRODUCTION_DEPLOYMENT_CHECKLIST.mdï¼‰

# 3. å¯åŠ¨æœåŠ¡
sudo systemctl daemon-reload
sudo systemctl enable xiuxian-bot
sudo systemctl start xiuxian-bot

# 4. æŸ¥çœ‹çŠ¶æ€
sudo systemctl status xiuxian-bot

# 5. æŸ¥çœ‹æ—¥å¿—
sudo journalctl -u xiuxian-bot -f
```

### ä½¿ç”¨ screenï¼ˆç®€å•æ–¹å¼ï¼‰
```bash
# å¯åŠ¨æ–° screen ä¼šè¯
screen -S xiuxian

# åœ¨ screen ä¸­å¯åŠ¨ Bot
cd /path/to/xiuxian-game/src
python3 -m bot.main

# æŒ‰ Ctrl+A ç„¶åæŒ‰ D è„±ç¦» screen

# é‡æ–°è¿æ¥
screen -r xiuxian
```

---

## ğŸ“Š éƒ¨ç½²æ£€æŸ¥ç»“æœ

| æ£€æŸ¥é¡¹ | çŠ¶æ€ |
|--------|------|
| âœ… ä»£ç è¯­æ³• | é€šè¿‡ |
| âœ… æ¨¡å—å¯¼å…¥ | é€šè¿‡ |
| âœ… é…ç½®æ–‡ä»¶ | é€šè¿‡ |
| âœ… æ•°æ®åº“è¿æ¥ | é€šè¿‡ |
| âœ… Handleræ³¨å†Œ | 32 ä¸ªå…¨éƒ¨æ­£å¸¸ |
| âš ï¸ æ•°æ®åº“è¿ç§» | **å¾…æ‰§è¡Œ** |

---

## ğŸ¯ æ–°åŠŸèƒ½äº®ç‚¹

### â­ æˆ˜æ–—ç­–ç•¥ç³»ç»Ÿï¼ˆv1.0.0 æ–°å¢ï¼‰
- ä¸‰ç§ç­–ç•¥ï¼šä¿å®ˆã€å¹³è¡¡ã€æ¿€è¿›
- AI æ™ºèƒ½é€‰æ‹©æŠ€èƒ½
- çµåŠ›å®æ—¶æ¶ˆè€—
- å‘½ä»¤ï¼š`/æˆ˜ç•¥ [ç­–ç•¥å]`

### â­ å®—é—¨æ‰©å±•åŠŸèƒ½
- 15 ä¸ªå®—é—¨ä»»åŠ¡
- 16 ç§å®—é—¨åŠŸæ³•
- å®—é—¨é•¿è€ç³»ç»Ÿ
- å®—é—¨æ’ååŠŸèƒ½

---

## ğŸ“ é‡è¦æ–‡ä»¶ä½ç½®

```
xiuxian-game/
â”œâ”€â”€ src/bot/main.py              # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ .env                         # é…ç½®æ–‡ä»¶ âš ï¸ å¿…é¡»ä¿®æ”¹
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ xiuxian.db              # SQLite æ•°æ®åº“
â”‚   â”œâ”€â”€ migrations/*.sql        # è¿ç§»è„šæœ¬ âš ï¸ å¿…é¡»æ‰§è¡Œ
â”‚   â””â”€â”€ logs/xiuxian.log        # è¿è¡Œæ—¥å¿—
â”œâ”€â”€ PRODUCTION_DEPLOYMENT_CHECKLIST.md  # è¯¦ç»†éƒ¨ç½²æ–‡æ¡£
â””â”€â”€ QUICK_DEPLOYMENT_GUIDE.md   # æœ¬æ–‡ä»¶
```

---

## ğŸ†˜ éœ€è¦å¸®åŠ©ï¼Ÿ

æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£ï¼š`PRODUCTION_DEPLOYMENT_CHECKLIST.md`

---

**æ›´æ–°æ—¥æœŸ**: 2025-11-25
**ç‰ˆæœ¬**: v1.0.0
**æˆ˜æ–—ç³»ç»Ÿ**: 100% å®Œæˆ âœ…
