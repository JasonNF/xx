# æµ‹è¯•æŒ‡å— - ä¿®ä»™ä¸–ç•ŒBot

## âœ… å½“å‰çŠ¶æ€

Botå·²ä¿®å¤å¹¶æ­£å¸¸è¿è¡Œï¼Œç°åœ¨æ”¯æŒä¸­è‹±æ–‡åŒè¯­å‘½ä»¤ï¼

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### 1. åŸºç¡€å‘½ä»¤æµ‹è¯•

åœ¨Telegramä¸­å‘botå‘é€ä»¥ä¸‹å‘½ä»¤ï¼š

#### è‹±æ–‡å‘½ä»¤
```
/start   - æ£€æµ‹çµæ ¹ï¼ˆå¼€å§‹æ¸¸æˆï¼‰
/help    - æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯
/info    - æŸ¥çœ‹ä¸ªäººçŠ¶æ€
```

#### ä¸­æ–‡å‘½ä»¤
```
.å¼€å§‹    - æ£€æµ‹çµæ ¹ï¼ˆå¼€å§‹æ¸¸æˆï¼‰
.å¸®åŠ©    - æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯
.çŠ¶æ€    - æŸ¥çœ‹ä¸ªäººçŠ¶æ€
```

### 2. é¢„æœŸç»“æœ

**æˆåŠŸæ ‡å¿—ï¼š**
- âœ… Botèƒ½å“åº” `/start` å‘½ä»¤
- âœ… Botèƒ½å“åº” `.å¼€å§‹` å‘½ä»¤
- âœ… ä¸¤ä¸ªå‘½ä»¤éƒ½æ˜¾ç¤ºç›¸åŒçš„çµæ ¹æ£€æµ‹ç»“æœ
- âœ… `/help` å’Œ `.å¸®åŠ©` éƒ½èƒ½æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
- âœ… `/info` å’Œ `.çŠ¶æ€` éƒ½èƒ½æ˜¾ç¤ºä¸ªäººçŠ¶æ€

**å…¸å‹å“åº”ç¤ºä¾‹ï¼š**
```
ğŸ´ æ£€æµ‹çµæ ¹

æ­å–œé“å‹ï¼æ‚¨çš„çµæ ¹èµ„è´¨å¦‚ä¸‹ï¼š

ğŸ”¥ ç«çµæ ¹ï¼š87
ğŸ’§ æ°´çµæ ¹ï¼š45
ğŸŒ± æœ¨çµæ ¹ï¼š62
âš¡ é›·çµæ ¹ï¼š23
ğŸ—¿ åœŸçµæ ¹ï¼š71

æ ¹æ®æ‚¨çš„çµæ ¹èµ„è´¨ï¼Œæœ€é€‚åˆä¿®ç‚¼çš„åŠŸæ³•æ˜¯...
```

### 3. æœåŠ¡å™¨ç«¯éªŒè¯

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl status xiuxian-bot

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
journalctl -u xiuxian-bot -f

# æŸ¥çœ‹æœ€è¿‘æ—¥å¿—
journalctl -u xiuxian-bot -n 50
```

**æ—¥å¿—ä¸­åº”è¯¥çœ‹åˆ°ï¼š**
```
âœ… å·²åŠ è½½ 81 ä¸ªä¸­æ–‡å‘½ä»¤æ”¯æŒ (ä½¿ç”¨ .å‘½ä»¤ æ ¼å¼)
Bot å¯åŠ¨æˆåŠŸï¼
```

**å½“ç”¨æˆ·å‘é€å‘½ä»¤æ—¶ï¼Œæ—¥å¿—æ˜¾ç¤ºï¼š**
```
æ”¶åˆ°ä¸­æ–‡å‘½ä»¤: .å¼€å§‹ -> /start
# ç„¶åæ˜¯å‘½ä»¤æ‰§è¡Œæ—¥å¿—
```

## ğŸ” æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šBotæ²¡æœ‰å“åº”

**æ£€æŸ¥æ­¥éª¤ï¼š**
1. ç¡®è®¤botåœ¨è¿è¡Œ
   ```bash
   systemctl status xiuxian-bot
   ```

2. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
   ```bash
   journalctl -u xiuxian-bot -n 100
   ```

3. é‡å¯æœåŠ¡
   ```bash
   systemctl restart xiuxian-bot
   ```

### é—®é¢˜2ï¼šä¸­æ–‡å‘½ä»¤ä¸å·¥ä½œä½†è‹±æ–‡å‘½ä»¤æ­£å¸¸

**å¯èƒ½åŸå› ï¼š**
- chinese_commands.pyæ¨¡å—æœªåŠ è½½
- MessageHandleræœªæ³¨å†Œ

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ£€æŸ¥æ—¥å¿—ä¸­æ˜¯å¦æœ‰"å·²åŠ è½½ 81 ä¸ªä¸­æ–‡å‘½ä»¤"
journalctl -u xiuxian-bot -n 100 | grep "ä¸­æ–‡å‘½ä»¤"

# å¦‚æœæ²¡æœ‰ï¼Œæ£€æŸ¥main.pyä¸­æ˜¯å¦è°ƒç”¨äº†setup_chinese_commands
grep "setup_chinese_commands" /opt/xiuxian-bot/src/bot/main.py
```

### é—®é¢˜3ï¼šè‹±æ–‡å‘½ä»¤ä¸å·¥ä½œä½†ä¸­æ–‡å‘½ä»¤æ­£å¸¸

**å¯èƒ½åŸå› ï¼š**
- CommandHandleræœªæ³¨å†Œ
- register_handlerså‡½æ•°ä¸ºç©º

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
# æ‰§è¡Œä¿®å¤è„šæœ¬
cd /root
wget https://raw.githubusercontent.com/JasonNF/xx/main/final_fix_english_handlers.sh
chmod +x final_fix_english_handlers.sh
sudo ./final_fix_english_handlers.sh
```

### é—®é¢˜4ï¼šéƒ¨åˆ†å‘½ä»¤ä¸å·¥ä½œ

**æ£€æŸ¥å‘½ä»¤æ˜ å°„ï¼š**
```bash
# æŸ¥çœ‹ä¸­æ–‡å‘½ä»¤æ˜ å°„
grep "CHINESE_COMMANDS" -A 100 /opt/xiuxian-bot/src/bot/handlers/chinese_commands.py

# æŸ¥çœ‹è‹±æ–‡CommandHandleræ³¨å†Œ
grep "CommandHandler" /opt/xiuxian-bot/src/bot/handlers/*.py | grep -v "^#"
```

## ğŸ“Š æ€§èƒ½ç›‘æ§

### CPUå’Œå†…å­˜ä½¿ç”¨
```bash
# æŸ¥çœ‹èµ„æºä½¿ç”¨
systemctl status xiuxian-bot

# è¯¦ç»†è¿›ç¨‹ä¿¡æ¯
ps aux | grep python | grep xiuxian-bot
```

### æ•°æ®åº“è¿æ¥
```bash
# æ£€æŸ¥PostgreSQLè¿æ¥
sudo -u postgres psql -c "SELECT count(*) FROM pg_stat_activity WHERE datname='xiuxian_prod';"
```

### æ—¥å¿—ç»Ÿè®¡
```bash
# ç»Ÿè®¡æœ€è¿‘1å°æ—¶çš„å‘½ä»¤è°ƒç”¨
journalctl -u xiuxian-bot --since "1 hour ago" | grep "æ”¶åˆ°ä¸­æ–‡å‘½ä»¤" | wc -l

# æŸ¥çœ‹æœ€å¸¸ç”¨çš„å‘½ä»¤
journalctl -u xiuxian-bot --since "1 hour ago" | grep "æ”¶åˆ°ä¸­æ–‡å‘½ä»¤" | awk '{print $NF}' | sort | uniq -c | sort -rn
```

## ğŸ¯ é«˜çº§æµ‹è¯•

### æµ‹è¯•æ‰€æœ‰æ¸¸æˆåŠŸèƒ½

```
# ä¿®ç‚¼ç›¸å…³
.ä¿®ç‚¼       - å¼€å§‹ä¿®ç‚¼
.æ”¶åŠŸ       - ç»“æŸä¿®ç‚¼
.çªç ´       - å¢ƒç•Œçªç ´

# æˆ˜æ–—ç›¸å…³
.æˆ˜æ–—       - æˆ˜æ–—èœå•
.æŒ‘æˆ˜       - æŒ‘æˆ˜å…¶ä»–ç©å®¶

# ç‰©å“ç›¸å…³
.èƒŒåŒ…       - æŸ¥çœ‹èƒŒåŒ…
.å•†åº—       - æ‰“å¼€å•†åº—

# å®—é—¨ç›¸å…³
.å®—é—¨       - å®—é—¨ä¿¡æ¯
.åˆ›å»ºå®—é—¨   - åˆ›å»ºæ–°å®—é—¨
.åŠ å…¥å®—é—¨   - åŠ å…¥ç°æœ‰å®—é—¨

# ç¤¾äº¤ç›¸å…³
.æ’è¡Œæ¦œ     - æŸ¥çœ‹æ’è¡Œ
.ç­¾åˆ°       - æ¯æ—¥ç­¾åˆ°
```

### å‹åŠ›æµ‹è¯•

```bash
# æ¨¡æ‹Ÿå¤šä¸ªç”¨æˆ·åŒæ—¶å‘é€å‘½ä»¤
# ï¼ˆéœ€è¦å¤šä¸ªTelegramè´¦å·ï¼‰

# ç›‘æ§ç³»ç»Ÿè´Ÿè½½
watch -n 1 'systemctl status xiuxian-bot | head -15'
```

## âœ… æµ‹è¯•é€šè¿‡æ ‡å‡†

- [ ] è‹±æ–‡å‘½ä»¤ `/start` æ­£å¸¸å·¥ä½œ
- [ ] ä¸­æ–‡å‘½ä»¤ `.å¼€å§‹` æ­£å¸¸å·¥ä½œ
- [ ] Botå“åº”æ—¶é—´ < 2ç§’
- [ ] æœåŠ¡æ— å´©æºƒæˆ–é‡å¯
- [ ] æ—¥å¿—æ— ERRORçº§åˆ«é”™è¯¯
- [ ] æ•°æ®åº“è¿æ¥ç¨³å®š
- [ ] å†…å­˜ä½¿ç”¨ < 200MB
- [ ] CPUä½¿ç”¨ < 10%ï¼ˆç©ºé—²æ—¶ï¼‰

## ğŸ“ æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

```
æµ‹è¯•æ—¶é—´ï¼š2025-11-26 01:10

åŠŸèƒ½æµ‹è¯•ï¼š
âœ… /start å‘½ä»¤ï¼šæ­£å¸¸
âœ… .å¼€å§‹ å‘½ä»¤ï¼šæ­£å¸¸
âœ… /help å‘½ä»¤ï¼šæ­£å¸¸
âœ… .å¸®åŠ© å‘½ä»¤ï¼šæ­£å¸¸
âœ… /info å‘½ä»¤ï¼šæ­£å¸¸
âœ… .çŠ¶æ€ å‘½ä»¤ï¼šæ­£å¸¸

æ€§èƒ½æŒ‡æ ‡ï¼š
- å“åº”æ—¶é—´ï¼š< 1ç§’
- å†…å­˜ä½¿ç”¨ï¼š68.1MB
- CPUä½¿ç”¨ï¼š< 1%
- æœåŠ¡è¿è¡Œæ—¶é—´ï¼š5åˆ†é’Ÿ

é—®é¢˜ï¼š
æ— 

å¤‡æ³¨ï¼š
ä¸­è‹±æ–‡å‘½ä»¤éƒ½èƒ½æ­£å¸¸å·¥ä½œï¼Œç³»ç»Ÿç¨³å®šè¿è¡Œã€‚
```

---

**æœ€åæ›´æ–°**ï¼š2025-11-26
**æµ‹è¯•äººå‘˜**ï¼šè¿ç»´å›¢é˜Ÿ
