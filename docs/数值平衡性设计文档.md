# 修仙游戏数值平衡性设计文档

## 一、境界突破修为需求表

### 1.1 炼气期 (1-13层)

| 层数 | 本层需求 | 累计总修为 | 预计修炼时间(天灵根) | 预计修炼时间(三灵根) |
|------|----------|------------|---------------------|---------------------|
| 1层  | 10,000   | 10,000     | 约44小时            | 约66小时            |
| 2层  | 15,000   | 25,000     | 约66小时            | 约100小时           |
| 3层  | 22,500   | 47,500     | 约100小时           | 约150小时           |
| 7层  | 113,906  | 321,719    | 约504小时(21天)     | 约756小时(32天)     |
| 13层 | 1,297,463| 3,872,389  | 约6089小时(254天)   | 约9130小时(381天)   |

**设计理念**:
- 1.5倍递增，前期快速进展，后期逐渐放缓
- 炼气期总计约需1年(天灵根)到1.5年(三灵根)

### 1.2 筑基期 (初/中/后期)

| 阶段 | 本阶需求   | 累计总修为     | 与炼气期相比 |
|------|-----------|---------------|-------------|
| 初期 | 2,000,000 | 5,872,389     | 1.5倍       |
| 中期 | 5,000,000 | 10,872,389    | 2.8倍       |
| 后期 | 10,000,000| 20,872,389    | 5.4倍       |

**预计时间**: 筑基期总计约2-3年

### 1.3 结丹期 (初/中/后期)

| 阶段 | 本阶需求    | 累计总修为     |
|------|-----------|---------------|
| 初期 | 25,000,000| 45,872,389    |
| 中期 | 40,000,000| 85,872,389    |
| 后期 | 60,000,000| 145,872,389   |

**预计时间**: 结丹期总计约5-8年

### 1.4 元婴期和化神期

| 境界    | 阶段 | 本阶需求     | 累计总修为       |
|---------|------|-------------|-----------------|
| 元婴期  | 初期 | 100,000,000 | 245,872,389     |
| 元婴期  | 后期 | 250,000,000 | 645,872,389     |
| 化神期  | 初期 | 500,000,000 | 1,145,872,389   |
| 化神期  | 后期 | 1,200,000,000| 3,145,872,389  |

---

## 二、修为获取渠道对比

### 2.1 修炼打坐 (基准线)

| 灵根类型 | 修为/小时 | 修为/天(24h) | 备注 |
|---------|----------|--------------|------|
| 天灵根  | 227      | 5,448        | 基础×2.27 |
| 异灵根  | 182      | 4,368        | 基础×1.82 |
| 双灵根  | 150      | 3,600        | 基础×1.5  |
| 三灵根  | 100      | 2,400        | 基础×1.0  |
| 伪灵根  | 50       | 1,200        | 基础×0.5  |

**计算公式**:
```
修为 = 100(基础) × 灵根倍数 × 功法加成 × 悟性加成 × 境界惩罚
```

**随机事件**:
- 5% 走火入魔: 修为减半
- 10% 顿悟: 修为翻倍
- 10% 获得宝物

### 2.2 打怪历练

| 怪物境界      | 修为奖励范围   | 冷却时间 | 效率评价        |
|--------------|---------------|---------|----------------|
| 炼气前期(1-5) | 100-450       | 5分钟   | ≈ 0.5-2小时修炼 |
| 炼气中期(6-9) | 600-1,200     | 5分钟   | ≈ 3-6小时修炼   |
| 炼气后期(10-13)| 1,500-2,800   | 5分钟   | ≈ 8-15小时修炼  |
| 筑基初期      | 4,000-5,000   | 5分钟   | ≈ 1-2天修炼     |
| 筑基中期      | 8,000-9,000   | 5分钟   | ≈ 3-4天修炼     |
| 结丹初期      | 30,000-32,000 | 5分钟   | ≈ 12-14天修炼   |

**平衡点**: 打怪效率 ≈ 挂机修炼的 30-50%（考虑冷却时间和风险）

### 2.3 秘境探索

| 秘境难度 | 境界要求 | 修为奖励  | 冷却时间 | 入场费 | 效率倍数 |
|---------|---------|----------|---------|--------|---------|
| 迷雾森林 | 炼气1   | 500+战斗  | 4小时   | 50灵石  | 2-3倍   |
| 幽暗洞窟 | 炼气5   | 1,500+战斗| 6小时   | 200灵石 | 3-5倍   |
| 古修士洞府| 炼气10  | 3,500+战斗| 12小时  | 500灵石 | 5-8倍   |
| 血色战场 | 筑基期  | 15,000+战斗| 24小时 | 2000灵石| 5-10倍  |
| 天元秘境 | 结丹期  | 80,000+战斗| 48小时 | 10000灵石| 10-15倍 |

**设计原则**:
- 高风险高回报
- 有冷却限制，不能无限刷
- 需要入场费，门槛较高

### 2.4 世界BOSS (每天12点)

| BOSS境界 | 总修为池    | 参与人数估算 | 人均修为   | 效率评价     |
|---------|------------|-------------|-----------|-------------|
| 炼气期   | 10k-30k    | 10-20人     | 500-3,000  | ≈2-10小时修炼|
| 筑基期   | 50k-180k   | 5-15人      | 3k-36k     | ≈1-15天修炼 |
| 结丹期   | 200k-900k  | 3-10人      | 20k-300k   | ≈10-100天修炼|
| 元婴期   | 1.5M-5M    | 2-5人       | 300k-2.5M  | 大量修为    |

**奖励倍数**:
- 伤害第一: 1.3倍
- 最后一击: 1.5倍
- 每天限制10次攻击

---

## 三、突破成功率设计

### 3.1 基础成功率表

| 境界突破       | 基础成功率 | 说明      |
|---------------|-----------|----------|
| 炼气前期(1-6)  | 85%       | 较容易   |
| 炼气后期(7-12) | 75%       | 中等     |
| 炼气→筑基      | 60%       | 第一个坎 |
| 筑基初→中      | 70%       | 较容易   |
| 筑基中→后      | 60%       | 中等     |
| 筑基→结丹      | 50%       | 困难     |
| 结丹初→中      | 45%       | 困难     |
| 结丹→元婴      | 30%       | 天劫     |
| 元婴→化神      | 15%       | 心魔劫   |
| 化神后期→圆满  | 5%        | 飞升劫   |

### 3.2 成功率加成

| 因素     | 加成幅度          | 说明                    |
|---------|------------------|------------------------|
| 悟性     | 每点+1%          | 10悟性 = +10%          |
| 天灵根   | +20-25%          | 最强加成               |
| 异灵根   | +15-20%          | 次强                   |
| 双灵根   | +10-17%          | 较好                   |
| 三灵根   | +5-13%           | 普通                   |
| 伪灵根   | 0%               | 无加成                 |
| 五灵根   | -5%              | 负面影响               |

**最终成功率范围**: 5%-95%

### 3.3 突破失败惩罚

| 境界         | 修为损失比例 | 额外惩罚           |
|-------------|-------------|-------------------|
| 炼气期       | 10%         | 无                |
| 筑基期       | 13-16%      | 可能受伤(-20%HP)  |
| 结丹期       | 19-22%      | 受伤(-20%HP)      |
| 元婴期       | 25-28%      | 重伤(-20%HP)      |
| 化神期       | 30%         | 重伤+走火入魔     |

---

## 四、经济系统平衡

### 4.1 灵石获取

| 渠道       | 灵石/次     | 频率     | 日收入估算  |
|-----------|------------|---------|------------|
| 每日签到   | 1000-1800  | 每天1次  | 1000-1800  |
| 打怪(炼气) | 10-700     | 无限(5分钟CD)| 1000-5000|
| 打怪(筑基) | 400-4000   | 无限(5分钟CD)| 5000-20000|
| 秘境(炼气) | 200-1500   | 有限     | 500-3000   |
| 秘境(筑基) | 5000-8000  | 有限     | 5000-15000 |
| 世界BOSS   | 500-80000  | 每天1次  | 1000-10000 |

### 4.2 灵石消耗

| 项目       | 消耗       | 说明           |
|-----------|-----------|---------------|
| 秘境入场   | 50-50000  | 根据难度      |
| 商店购物   | 100-10000 | 丹药、法器     |
| 创建宗门   | 100,000   | 一次性        |
| 炼丹炼器   | 50-5000   | 根据配方      |
| 拍卖交易   | 5%手续费  | 市场税率      |

---

## 五、升级时间线估算

### 5.1 炼气期到筑基期

| 玩家类型          | 每日在线 | 预计天数  | 说明                |
|------------------|---------|----------|-------------------|
| 天灵根+氪金玩家   | 6小时   | 180-240天| 打BOSS+秘境+修炼   |
| 三灵根+普通玩家   | 3小时   | 300-400天| 主要靠修炼         |
| 伪灵根+休闲玩家   | 1小时   | 600-800天| 韩立模式,需耐心    |

### 5.2 筑基期到结丹期

| 玩家类型          | 预计天数   | 说明              |
|------------------|-----------|------------------|
| 天灵根+氪金玩家   | 500-700天 | 2年左右           |
| 三灵根+普通玩家   | 1000-1500天| 3-4年            |

### 5.3 结丹期到元婴期

| 玩家类型          | 预计天数     | 说明           |
|------------------|-------------|---------------|
| 天灵根+氪金玩家   | 1500-2500天 | 4-7年         |
| 三灵根+普通玩家   | 3000-5000天 | 8-13年        |

**设计目标**:
- 炼气期: 半年到1年(核心期)
- 筑基期: 1-2年
- 结丹期: 2-4年
- 元婴期: 4-10年
- 化神期: 10年+ (超长期内容)

---

## 六、数值平衡性验证

### 6.1 炼气期玩家日常循环

**场景**: 三灵根玩家，在线3小时/天

| 活动      | 时间  | 修为收益 | 灵石收益 |
|---------|------|---------|---------|
| 打坐修炼 | 2小时 | 200     | 0       |
| 打怪2次  | 10分钟| 300     | 100     |
| 秘境1次  | 30分钟| 800     | 300     |
| 签到     | 1分钟 | 0       | 1000    |
| **合计** | 3小时 | **1300**| **1400**|

**进度**: 炼气1层→2层需10000修为，约需8天

### 6.2 效率对比

| 渠道   | 修为/小时 | 相对效率 | 限制条件      |
|-------|----------|---------|--------------|
| 修炼   | 100      | 100%    | 无限制       |
| 打怪   | 180      | 180%    | 5分钟CD      |
| 秘境   | 1600     | 1600%   | 每天1-2次    |
| 世界BOSS| 2000    | 2000%   | 每天1次，需多人|

**结论**: 数值设计合理，高收益活动有严格限制

---

## 七、优化建议

### 7.1 新手期优化
- 炼气1-3层可以加快50%速度
- 提供新手任务奖励修为
- 前7天签到奖励翻倍

### 7.2 中期留存
- 筑基期增加更多玩法(神识、金丹品质)
- 宗门系统提供额外修炼加成
- 每周限时秘境活动

### 7.3 长期内容
- 元婴期以上为超长期内容
- 重点在PVP、宗门战、排行榜
- 定期开放高级秘境和世界BOSS

---

## 八、数据导入说明

### 8.1 SQL文件

1. **init_monsters.sql** - 50+怪物数据
2. **init_secret_realms.sql** - 15个秘境
3. **init_world_boss_templates.sql** - 15个BOSS模板

### 8.2 导入命令

```bash
# 进入项目目录
cd /Users/zc/EC-AI/xiuxian-game

# 导入怪物数据
sqlite3 data/xiuxian.db < data/init_monsters.sql

# 导入秘境数据
sqlite3 data/xiuxian.db < data/init_secret_realms.sql

# 导入世界BOSS模板
sqlite3 data/xiuxian.db < data/init_world_boss_templates.sql
```

### 8.3 代码集成

新增文件:
- `src/bot/config/realm_config.py` - 境界配置类
- 已更新 `src/bot/services/player_service.py` - 突破逻辑

---

## 九、总结

### 9.1 核心设计原则

1. **渐进式难度**: 越高境界越难突破
2. **多元化获取**: 修炼+打怪+秘境+BOSS
3. **风险与回报**: 高收益活动有限制或风险
4. **长期可玩性**: 化神期需要10年+

### 9.2 数值特点

- ✅ 新手友好: 炼气期前3层快速
- ✅ 中期挑战: 筑基突破60%成功率
- ✅ 长期内容: 元婴期以上超长线
- ✅ 社交驱动: 世界BOSS需要合作
- ✅ 经济平衡: 收入与支出合理

### 9.3 后续优化方向

1. 根据玩家数据调整突破成功率
2. 动态调整怪物修为奖励
3. 增加VIP系统提供修炼加速
4. 定期举办双倍修为活动

---

**文档版本**: v1.0
**最后更新**: 2025-01-24
**维护者**: Claude Code
